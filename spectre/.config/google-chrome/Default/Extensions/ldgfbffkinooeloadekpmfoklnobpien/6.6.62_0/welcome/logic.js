function debounce(e,t,n){let o;return function(){const i=n&&!o;clearTimeout(o),o=setTimeout((()=>{o=null,n||e.apply(this,arguments)}),t),i&&e.apply(this,arguments)}}function detectSystem(){return-1!=navigator.appVersion.indexOf("Win")?"windows":-1!=navigator.appVersion.indexOf("Mac")?"macos":-1!=navigator.appVersion.indexOf("X11")||-1!=navigator.appVersion.indexOf("Linux")?"linux":""}function detectBrowser(){let e=navigator.userAgent;return"brave"in navigator?"brave":e.match(/firefox|fxios/i)?"firefox":e.match(/opr\//i)?"opera":e.match(/edg/i)?"edge":e.match(/chrome|chromium|crios/i)?"chrome":e.match(/safari/i)?"safari":""}const scrollByPage=debounce((e=>{window.scrollTo({top:0,left:window.scrollX+window.innerWidth*(e?1:-1),behavior:"smooth"})}),300,!0);window.onload=()=>{async function e(){const e=await fetch("https://api.raindrop.io/v1/user",{credentials:"include"}),{result:t}=await e.json();t?document.documentElement.classList.add("authenticated"):document.documentElement.classList.remove("authenticated")}document.documentElement.classList.add(detectSystem()),document.documentElement.classList.add(detectBrowser()),document.querySelectorAll(".browser-name").forEach((e=>e.innerText=detectBrowser())),document.querySelectorAll(".request-tabs-permission").forEach((e=>e.addEventListener("click",(e=>{e.preventDefault(),("chrome"in window?window.chrome:window.browser).permissions.request({permissions:["tabs"]})})))),e().then((()=>{})).catch(console.error),window.addEventListener("focus",e);const t=document.querySelectorAll(".slide"),n=new IntersectionObserver((e=>{e.forEach((e=>{e.target.style.setProperty("--intersection-ratio",e.intersectionRatio>=.9?1:e.intersectionRatio.toFixed(1)),e.intersectionRatio>=.9&&history.replaceState({},"",`#${e.target.id}`)}))}),{rootMargin:"0px",threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]});function o(){if(location.hash){const e=document.querySelector(location.hash);e.hidden&&(e.removeAttribute("hidden"),e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}))}}t.forEach((e=>{n.observe(e)})),window.addEventListener("hashchange",o),o(),document.documentElement.addEventListener("wheel",(e=>{window.innerHeight<document.documentElement.scrollHeight||(e.preventDefault(),scrollByPage(e.deltaY>=0))}),{passive:!1});const i=document.querySelector("#nav-left"),r=document.querySelector("#nav-right");i.addEventListener("click",(e=>{e.preventDefault(),scrollByPage(!1)})),r.addEventListener("click",(e=>{e.preventDefault(),scrollByPage(!0)}));const c=()=>{i.hidden=window.scrollX<=0,r.hidden=window.scrollX>=document.documentElement.scrollWidth-window.innerWidth};c(),window.addEventListener("scroll",c),document.querySelector("#decline-uninstall").addEventListener("click",(e=>{e.preventDefault(),browser.management.uninstallSelf({showConfirmDialog:!1})}))};